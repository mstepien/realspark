# generated by datamodel-codegen:
#   filename:  openapi.yaml
#   timestamp: 2026-01-08T12:09:26+00:00

from __future__ import annotations

from typing import Any

from pydantic import BaseModel, Field


class UploadResponse(BaseModel):
    task_id: str


class ImageStats(BaseModel):
    width: int | None = None
    height: int | None = None
    mean_color: list[float] | None = None
    hog_features: list[float] | None = None
    ai_probability: float | None = None
    hog_image_url: str | None = None
    fd_default: float | None = Field(
        None, description='Fractal dimension calculated over the full box range.'
    )


class AggregateStats(BaseModel):
    total_images: int
    avg_width: float | None = None
    avg_height: float | None = None
    avg_color: list[float] | None = None


class Result(BaseModel):
    id: str | None = None
    url: str | None = None
    stats: ImageStats | None = None


class TaskStatus(BaseModel):
    status: str = Field(
        ...,
        description='Current status (Starting..., Preprocessing..., Performing Parallel Analysis & Upload..., Saving to Database..., Complete, Error, Abandoned)',
    )
    progress: int
    steps: list[str]
    current_step: str | None = None
    completed_steps: list[str]
    partial_results: dict[str, Any] | None = None
    result: Result | None = None
    error: str | None = Field(
        None,
        description='Error message if the task failed (e.g., due to analysis error or process timeout).',
    )
